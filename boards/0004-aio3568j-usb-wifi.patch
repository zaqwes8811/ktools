diff -Naur -x '*.o' -x '*.cmd' -x '*.ko' -x '*.dtb' -x '*.a' -x Image -x generated --no-dereference a/arch/arm64/boot/dts/rockchip/rk3568-rock-3b.dts b/arch/arm64/boot/dts/rockchip/rk3568-rock-3b.dts
--- a/arch/arm64/boot/dts/rockchip/rk3568-rock-3b.dts	2026-02-20 11:48:43.369816546 +0300
+++ b/arch/arm64/boot/dts/rockchip/rk3568-rock-3b.dts	2026-02-20 11:55:45.814393524 +0300
@@ -118,29 +118,31 @@
 		regulator-max-microvolt = <5000000>;
 	};
 
-	vcc5v0_usb_host: regulator-5v0-vcc-usb-host {
-		compatible = "regulator-fixed";
-		enable-active-high;
-		gpios = <&gpio0 RK_PA6 GPIO_ACTIVE_HIGH>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&usb_host_pwren_h>;
-		regulator-name = "vcc5v0_usb_host";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		vin-supply = <&vcc5v0_sys>;
-	};
+	// vcc5v0_usb_host: regulator-5v0-vcc-usb-host {
+	// 	compatible = "regulator-fixed";
+	// 	enable-active-high;
+	// 	gpios = <&gpio0 RK_PA6 GPIO_ACTIVE_HIGH>;
+	// 	pinctrl-names = "default";
+	// 	pinctrl-0 = <&usb_host_pwren_h>;
+	// 	regulator-name = "vcc5v0_usb_host";
+	// 	regulator-min-microvolt = <5000000>;
+	// 	regulator-max-microvolt = <5000000>;
+	// 	vin-supply = <&vcc5v0_sys>;
+	// 	regulator-always-on;
+	// };
 
-	vcc5v0_usb_otg: regulator-5v0-vcc-usb-otg {
-		compatible = "regulator-fixed";
-		enable-active-high;
-		gpios = <&gpio0 RK_PA5 GPIO_ACTIVE_HIGH>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&usb_otg_pwren_h>;
-		regulator-name = "vcc5v0_usb_otg";
-		regulator-min-microvolt = <5000000>;
-		regulator-max-microvolt = <5000000>;
-		vin-supply = <&vcc5v0_sys>;
-	};
+	// vcc5v0_usb_otg: regulator-5v0-vcc-usb-otg {
+	// 	compatible = "regulator-fixed";
+	// 	enable-active-high;
+	// 	gpios = <&gpio0 RK_PA5 GPIO_ACTIVE_HIGH>;
+	// 	pinctrl-names = "default";
+	// 	pinctrl-0 = <&usb_otg_pwren_h>;
+	// 	regulator-name = "vcc5v0_usb_otg";
+	// 	regulator-min-microvolt = <5000000>;
+	// 	regulator-max-microvolt = <5000000>;
+	// 	vin-supply = <&vcc5v0_sys>;
+	// 	regulator-always-on;
+	// };
 
 	sdio_pwrseq: sdio-pwrseq {
 		compatible = "mmc-pwrseq-simple";
@@ -167,18 +169,72 @@
 			sound-dai = <&rk809>;
 		};
 	};
+
+	vcc_hub_power: vcc-hub-power-regulator {
+		compatible = "regulator-fixed";
+		enable-active-high;
+		gpio = <&gpio3 RK_PA2 GPIO_ACTIVE_HIGH>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&vcc_hub_power_en>;
+		regulator-name = "vcc_hub_power_en";
+		regulator-always-on;
+	};
+
+	vcc_hub_reset: vcc-hub-reset-regulator {
+		compatible = "regulator-fixed";
+		enable-active-high;
+		gpio = <&gpio3 RK_PA6 GPIO_ACTIVE_HIGH>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&vcc_hub_reset_en>;
+		regulator-name = "vcc_hub_reset_en";
+		regulator-always-on;
+	};
+
+	vcc5v0_host: vcc5v0-host-regulator {
+		compatible = "regulator-fixed";
+		enable-active-high;
+		gpio = <&gpio0 RK_PD6 GPIO_ACTIVE_HIGH>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&vcc5v0_host_en>;
+		regulator-name = "vcc5v0_host";
+		regulator-always-on;
+		regulator-boot-on;
+	};
+
+	vcc5v0_otg: vcc5v0-otg-regulator {
+		compatible = "regulator-fixed";
+		enable-active-high;
+		gpio = <&gpio0 RK_PA5 GPIO_ACTIVE_HIGH>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&vcc5v0_otg_en>;
+		regulator-name = "vcc5v0_otg";
+	};
+
 };
 
-&combphy0 {
+// &combphy0 {
+// 	status = "okay";
+// };
+
+// &combphy1 {
+// 	status = "okay";
+// };
+
+&combphy2 {
 	status = "okay";
 };
 
-&combphy1 {
-	status = "okay";
+/*
+ * Combo PHYs for USB3 SuperSpeed signals.
+ */
+&combphy0 {
+    status = "okay";
+    phy-supply = <&vcc5v0_host>; // For USB3 on the host-only port
 };
 
-&combphy2 {
-	status = "okay";
+&combphy1 {
+    status = "okay";
+    phy-supply = <&vcc5v0_otg>;   // For USB3 on the OTG port
 };
 
 &cpu0 {
@@ -667,13 +723,13 @@
 	};
 
 	usb {
-		usb_host_pwren_h: usb-host-pwren-h {
-			rockchip,pins = <0 RK_PA6 RK_FUNC_GPIO &pcfg_pull_none>;
-		};
-
-		usb_otg_pwren_h: usb-otg-pwren-h {
-			rockchip,pins = <0 RK_PA5 RK_FUNC_GPIO &pcfg_pull_none>;
-		};
+		// usb_host_pwren_h: usb-host-pwren-h {
+		// 	rockchip,pins = <0 RK_PA6 RK_FUNC_GPIO &pcfg_pull_none>;
+		// };
+
+		// usb_otg_pwren_h: usb-otg-pwren-h {
+		// 	rockchip,pins = <0 RK_PA5 RK_FUNC_GPIO &pcfg_pull_none>;
+		// };
 	};
 
 	wifi {
@@ -783,13 +839,35 @@
 	status = "okay";
 };
 
+// &usb_host0_xhci {
+// 	extcon = <&usb2phy0>;
+// 	status = "okay";
+// };
+
 &usb_host0_xhci {
-	extcon = <&usb2phy0>;
-	status = "okay";
+    status = "okay";
+    //dr_mode = "otg"; // Can be "host" if device mode is not needed
+	dr_mode = "host";
+    phys = <&usb2phy0_otg>, <&combphy0 PHY_TYPE_USB3>;
+    phy-names = "usb2-phy", "usb3-phy";
+};
+
+// &usb_host1_xhci {
+// 	status = "okay";
+// };
+
+&usb_host1_ehci {
+    status = "okay";
+};
+
+&usb_host1_ohci {
+    status = "okay";
 };
 
 &usb_host1_xhci {
-	status = "okay";
+    status = "okay";
+    phys = <&usb2phy1_otg>, <&combphy1 PHY_TYPE_USB3>;
+    phy-names = "usb2-phy", "usb3-phy";
 };
 
 &usb2phy0 {
@@ -797,12 +875,12 @@
 };
 
 &usb2phy0_host {
-	phy-supply = <&vcc5v0_usb_host>;
+	phy-supply = <&vcc5v0_host>;
 	status = "okay";
 };
 
 &usb2phy0_otg {
-	phy-supply = <&vcc5v0_usb_otg>;
+	phy-supply = <&vcc5v0_otg>;
 	status = "okay";
 };
 
@@ -810,9 +888,18 @@
 	status = "okay";
 };
 
+// &usb2phy1_otg {
+// 	phy-supply = <&vcc5v0_host>;
+// 	status = "okay";
+// };
+
+&usb2phy1_host {
+    status = "okay";
+    phy-supply = <&vcc5v0_host>; // Often shared with the other host supply
+};
+
 &usb2phy1_otg {
-	phy-supply = <&vcc5v0_usb_host>;
-	status = "okay";
+    status = "okay";
 };
 
 &vop {
@@ -1055,5 +1142,23 @@
 				<3 RK_PD7 3 &pcfg_pull_none_drv_level_2>;
 		};
 	};
+
+	usb {
+		vcc_hub_power_en: vcc-hub-power-en {
+			rockchip,pins = <3 RK_PA2 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+
+		vcc_hub_reset_en: vcc-hub-reset-en {
+			rockchip,pins = <3 RK_PA6 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+
+		vcc5v0_host_en: vcc5v0-host-en {
+			rockchip,pins = <0 RK_PD6 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+
+		vcc5v0_otg_en: vcc5v0-otg-en {
+			rockchip,pins = <0 RK_PA5 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+	};
 };
 
